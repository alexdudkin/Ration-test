Хранить в базе настройки для процентов начисляемым при оплате, и максимальный процент, для полной кастомизации, хранить процент можно в юзере, максимальный процент как свойство каталога например.
В юзере создать ещё одно поле где хранить текущие баллы, при оплате предлагать выбрать эти балы с бонусного счета, и при успешной оплате и использованных баллах, их списывать.
В теории как-то так.